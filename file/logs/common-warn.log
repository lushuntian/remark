2021-04-14 11:38:40.451 WARN  --- [main] o.s.w.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'consumerClient': Unsatisfied dependency expressed through field 'receiver'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteMessageReceiver' defined in file [C:\Users\lushuntian\Desktop\shuntian\code\remark\file\target\classes\com\sunday\file\receive\VoteMessageReceiver.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'voteRepository': Unsatisfied dependency expressed through field 'db'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jdbcTemplate' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/JdbcTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'jdbcTemplate' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker': Invocation of init method failed; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [schema.sql]: CREATE TABLE IF NOT EXISTS vote_document ( id INT primary key auto_increment, gmt_create datetime not null default CURRENT_TIMESTAMP, voter_id INT not null , content_id INT not null voting TINYINT not null , votes INT not null , create_date INT not null ); nested exception is org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE IF NOT EXISTS VOTE_DOCUMENT ( ID INT PRIMARY KEY AUTO_INCREMENT, GMT_CREATE DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, VOTER_ID INT NOT NULL , CONTENT_ID INT NOT NULL VOTING[*] TINYINT NOT NULL , VOTES INT NOT NULL , CREATE_DATE INT NOT NULL )"; expected "AS, DEFAULT, GENERATED, ON, NOT, NULL, AUTO_INCREMENT, BIGSERIAL, SERIAL, IDENTITY, NULL_TO_DEFAULT, SEQUENCE, SELECTIVITY, COMMENT, CONSTRAINT, PRIMARY, UNIQUE, NOT, NULL, COMMENT, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE IF NOT EXISTS vote_document ( id INT primary key auto_increment, gmt_create datetime not null default CURRENT_TIMESTAMP, voter_id INT not null , content_id INT not null voting TINYINT not null , votes INT not null , create_date INT not null ) [42001-200]
